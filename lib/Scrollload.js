!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["Scrollload.js"]=e():t["Scrollload.js"]=e()}(this,function(){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,o){"use strict";var i=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o};e.a=i},function(t,e){!function(){var e=function(t){var e,o;t=t||document.querySelector(t),t&&t.addEventListener("touchstart",function(i){e=i.touches[0].pageY,o=t.scrollTop,o<=0&&(t.scrollTop=1),o+t.offsetHeight>=t.scrollHeight&&(t.scrollTop=t.scrollHeight-t.offsetHeight-1)},!1)};"undefined"!=typeof window&&"undefined"==typeof t?window.ScrollFix=e:t.exports=e}()},,function(t,e,o){!function(e,o){t.exports=o()}(this,function(){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=function(){function t(e){if(i(this,t),!e||e===window)return null;if(!(e instanceof HTMLElement))throw new Error("parameter 1 must be a HTMLElement instance!");this.win=e;var o=e.querySelector(".localScrollFix-fixDom");o?this.fixDom=o:this.createFixDom(),this.isArrived=!1,this.update()}return n(t,[{key:"createFixDom",value:function(){this.win.insertAdjacentHTML("beforeend",'<div class="localScrollFix-fixDom" style="margin: 0; padding: 0"></div>'),this.fixDom=this.win.querySelector(".localScrollFix-fixDom")}},{key:"removeFixDom",value:function(){this.win.removeChild(this.fixDom),this.fixDom=null}},{key:"arrived",value:function(){this.isArrived=!0,this.removeFixDom()}},{key:"update",value:function(){if(!this.isArrived){var t=this.computerFixDomPaddingTop();t>=0?this.fixDom.style.paddingTop=t+3+"px":this.arrived()}}},{key:"computerFixDomPaddingTop",value:function(){var t=this.fixDom,e=this.win,o=t.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom,n=window.getComputedStyle(e,null),r=n.paddingBottom,s=n.borderBottomWidth;return i-parseFloat(r)-parseFloat(s)-o}}]),t}();e.default=r,window.LocalScrollFix=r}])})},function(t,e,o){"use strict";function i(t){return'<div style="text-align: center;font-size: 12px;line-height: 50px;">'+t+"</div>"}function n(t,e){"transform"in e&&(e.webkitTransform=e.transform),"transition"in e&&(e.webkitTransition=e.transition),t.forEach(function(t){return t&&o.i(r.a)(t.style,e)})}var r=o(0),s='\n    <div style="height: 50px;">\n        <svg class="scrollload-movingHtml" width="20px" height="30px" style="display: block;margin: 0 auto;transition: all 300ms;-webkit-transition: all 300ms;">\n            <line x1="10" y1="2" x2="10" y2="25" stroke="#666" stroke-width="2" />\n            <polyline points="3 17 10 25 17 17" fill="none" stroke="#666" stroke-width="2"/>\n        </svg>\n    </div>\n',a="\n    <div style=\"display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack: center;-ms-flex-pack: center;justify-content: center; height: 50px;\">\n        <svg  width='24px' height='24px' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" class=\"uil-default\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"none\" class=\"bk\"></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(0 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(30 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.08333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(60 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.16666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(90 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.25s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(120 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.3333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(150 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.4166666666666667s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(180 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(210 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5833333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(240 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.6666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(270 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.75s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(300 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.8333333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#333' transform='rotate(330 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.9166666666666666s' repeatCount='indefinite'/></rect></svg>\n    </div>\n",l={loadingHtml:a,noMoreDataHtml:i("没有更多数据了"),exceptionHtml:i("出现异常"),notEnoughRefreshPortHtml:s,overRefreshPortHtml:s,refreshingHtml:a,arrivedRefreshPortHandler:function(t){document.body.clientWidth;var e=t.notEnoughRefreshPortDom.querySelector(".scrollload-movingHtml"),o=t.overRefreshPortDom.querySelector(".scrollload-movingHtml");t.isMovingDown?n([e,o],{transform:"rotate(180deg)"}):n([e,o],{transform:"rotate(0deg)"})},touchEnd:function(t){var e=t.notEnoughRefreshPortDom.querySelector(".scrollload-movingHtml"),o=t.overRefreshPortDom.querySelector(".scrollload-movingHtml");Scrollload.setStyles([e,o],{transform:"rotate(0deg)"})}};e.a=l},function(t,e,o){"use strict";e.a=function(t,e,o){var i,n,r,s,a=0;o||(o={});var l=function(){a=o.leading===!1?0:Date.now(),i=null,s=t.apply(n,r),i||(n=r=null)},h=function(){var h=Date.now();a||o.leading!==!1||(a=h);var c=e-(h-a);return n=this,r=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),a=h,s=t.apply(n,r),i||(n=r=null)):i||o.trailing===!1||(i=setTimeout(l,c)),s};return h.cancel=function(){clearTimeout(i),a=0,i=n=r=null},h}},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){return!0}function r(t,e){"transform"in e&&(e.webkitTransform=e.transform),"transition"in e&&(e.webkitTransition=e.transition),t.forEach(function(t){return t&&o.i(h.a)(t.style,e)})}function s(t,e){t.style.clip="rect("+e+"px 1000px 1000px 0)"}function a(){}Object.defineProperty(e,"__esModule",{value:!0});var l=o(5),h=o(0),c=o(3),u=o.n(c),f=o(1),d=o.n(f),m=o(4),p=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._options=o.i(h.a)({},t.defaults,e);var n=this._options.container||document.querySelector(".scrollload-container");if(this.container=n,!(n instanceof HTMLElement))throw new Error("container must be a HTMLElement instance!");if(this.win=this._options.window,this.isGlobalScroll=this.win===window,this.contentDom=this._options.content||this.container.querySelector(".scrollload-content"),!(this.contentDom instanceof HTMLElement))throw new Error("content must be a HTMLElement instance!");this._options.enableLoadMore&&(this.windowHeight=window.innerHeight,this.isLock=this._options.isInitLock,this.hasMoreData=!0,this.createBottomDom(),this.scrollListener=this.scrollListener.bind(this),this.resizeListener=this.resizeListener.bind(this),this.scrollListenerWrapThrottle=o.i(l.a)(this.scrollListener,50),this.resizeListenerWrapThrottle=o.i(l.a)(this.resizeListener,50),this.attachScrollListener()),this._options.enablePullRefresh&&(this.createTopDom(),this.startPageY=0,this.prePageY=0,this.isMoving=!1,this.isMovingDown=!0,this.isRefreshing=!1,this.enterTouchStart=!1,this.distance=0,this.attachTouchListener()),this.fixLocalScroll(),this._options.initedHandler.call(this,this)}return p(t,[{key:"fixLocalScroll",value:function(){this.win!==window&&n()?(this._options.useLocalScrollFix&&(this.localScrollFix=new u.a(this.win)),this._options.useScrollFix&&new d.a(this.win)):(this._options.useLocalScrollFix=!1,this._options.useScrollFix=!1)}},{key:"createBottomDom",value:function(){this.container.insertAdjacentHTML("beforeend",'<div class="scrollload-bottom">'+this._options.loadingHtml+"</div>"),this.bottomDom=this.container.querySelector(".scrollload-bottom")}},{key:"createTopDom",value:function(){var t=this._options,e=t.notEnoughRefreshPortHtml,o=t.overRefreshPortHtml,i=t.refreshingHtml;this.container.insertAdjacentHTML("afterbegin",'<div class="scrollload-top" style="position: relative;">\n                <div class="scrollload-top-content" style="position: absolute; left: 0; right: 0;">\n                    <div class="scrollload-notEnoughRefreshPort" style="display: block">'+e+'</div>\n                    <div class="scrollload-overRefreshPort" style="display: none">'+o+'</div>\n                    <div class="scrollload-refreshing" style="display: none">'+i+"</div>\n                </div>\n            </div>"),this.topDom=this.container.querySelector(".scrollload-top"),this.topContentDom=this.topDom.querySelector(".scrollload-top-content"),this.topDomHeight=this.topContentDom.clientHeight,this.topDom.style.top="-"+this.topDomHeight+"px",this.topContentDom.style.clip="rect(1000px 1000px 1000px 0)",this.notEnoughRefreshPortDom=this.topContentDom.querySelector(".scrollload-notEnoughRefreshPort"),this.overRefreshPortDom=this.topContentDom.querySelector(".scrollload-overRefreshPort"),this.refreshingDom=this.topContentDom.querySelector(".scrollload-refreshing")}},{key:"showNoMoreDataDom",value:function(){this.bottomDom.innerHTML=this._options.noMoreDataHtml}},{key:"showLoadingDom",value:function(){this.bottomDom.innerHTML=this._options.loadingHtml}},{key:"showExceptionDom",value:function(){this.bottomDom.innerHTML=this._options.exceptionHtml}},{key:"showNotEnoughRefreshPortDom",value:function(){r([this.overRefreshPortDom,this.refreshingDom],{display:"none"}),r([this.notEnoughRefreshPortDom],{display:"block"})}},{key:"showOverRefreshPortDom",value:function(){r([this.notEnoughRefreshPortDom,this.refreshingDom],{display:"none"}),r([this.overRefreshPortDom],{display:"block"})}},{key:"showRefreshingDom",value:function(){r([this.notEnoughRefreshPortDom,this.overRefreshPortDom],{display:"none"}),r([this.refreshingDom],{display:"block"})}},{key:"calMovingDistance",value:function(t,e){this.distance=this._options.calMovingDistance(t,e)}},{key:"isTop",value:function(){return this.isGlobalScroll?window.pageYOffset<=0:this.win.scrollTop<=1}},{key:"refreshComplete",value:function(){r([this.topDom,this.contentDom,this.bottomDom],{transition:"all 300ms",transform:"translate3d(0, 0, 0)"}),r([this.topContentDom],{transition:"all 300ms"}),s(this.topContentDom,this.topDomHeight),this.isRefreshing=!1}},{key:"movingHandler",value:function(){this.isArrivedRefreshPort()&&this.arrivedRefreshPortHandler(),this.isOverRefreshPort()?this.overRefreshPortHandler():this.notEnoughRefreshPortHandler();var t=Math.max(this.distance,0);0===t&&(this.isMoving=!1),r([this.topDom,this.contentDom,this.bottomDom],{transform:"translate3d(0, "+t+"px, 0)"}),s(this.topContentDom,this.topDomHeight-t),this._options.touchMove.call(this,this)}},{key:"isOverRefreshPort",value:function(){return this.distance>=this.topDomHeight}},{key:"triggerPullResfresh",value:function(){this.showRefreshingDom(),this.isRefreshing=!0,this._options.pullRefresh.call(this,this),r([this.topDom,this.contentDom,this.bottomDom],{transition:"all 300ms",transform:"translate3d(0, "+this.topDomHeight+"px, 0)"})}},{key:"overRefreshPortHandler",value:function(){this._options.overRefreshPortHandler.call(this,this)}},{key:"notEnoughRefreshPortHandler",value:function(){this._options.notEnoughRefreshPortHandler.call(this,this)}},{key:"isArrivedRefreshPort",value:function(){var t=this._options.calMovingDistance(this.startPageY,this.prePageY);return this.distance>=this.topDomHeight&&t<this.topDomHeight||this.distance<=this.topDomHeight&&t>this.topDomHeight}},{key:"arrivedRefreshPortHandler",value:function(){this.isMovingDown?this.showOverRefreshPortDom():this.showNotEnoughRefreshPortDom(),this._options.arrivedRefreshPortHandler.call(this,this)}},{key:"touchStart",value:function(t){this.isRefreshing||(0===this.topDomHeight&&(this.topDomHeight=this.topContentDom.clientHeight,this.topDom.style.top="-"+this.topDomHeight+"px"),this.enterTouchStart=!0,this.startPageY=this.prePageY=t.touches[0].pageY,r([this.topDom,this.contentDom,this.bottomDom],{transform:"translate3d(0, 0, 0)",transition:"none"}),r([this.topContentDom],{transition:"none"}),this.showNotEnoughRefreshPortDom(),this._options.touchStart.call(this,this))}},{key:"touchMove",value:function(t){if(this.enterTouchStart){var e=t.touches[0].pageY;this.isMovingDown=e>=this.prePageY,this.isMoving?(this.calMovingDistance(this.startPageY,e),this.movingHandler(),t.preventDefault()):this.isTop()&&this.isMovingDown&&(this.isMoving=!0,t.preventDefault()),this.prePageY=e}}},{key:"touchEnd",value:function(t){this.isMoving&&(this._options.touchEnd.call(this,this),this.isOverRefreshPort()?this.triggerPullResfresh():this.refreshComplete(),this.startPageY=this.prePageY=0,this.isMoving=!1)}},{key:"scrollListener",value:function(){this.isLock||this.isBottom()&&(this.isLock=!0,this._options.loadMore.call(this,this))}},{key:"isBottom",value:function(){var t=this.win,e=this.bottomDom,o=this.windowHeight,i=e.getBoundingClientRect().top,n=void 0;if(this.isGlobalScroll)n=o;else{var r=t.getBoundingClientRect(),s=r.height,a=r.top;n=s,i-=a}return i-n<=this._options.threshold}},{key:"resizeListener",value:function(){this.isGlobalScroll&&(this.windowHeight=window.innerHeight),this.scrollListener()}},{key:"attachScrollListener",value:function(){this.win.addEventListener("scroll",this.scrollListenerWrapThrottle),this.win.addEventListener("resize",this.resizeListenerWrapThrottle),this.scrollListener()}},{key:"detachScrollListener",value:function(){this.win.removeEventListener("scroll",this.scrollListenerWrapThrottle),this.win.removeEventListener("resize",this.resizeListenerWrapThrottle)}},{key:"attachTouchListener",value:function(){var t=this;this.container.addEventListener("touchstart",function(e){t.enterTouchStart=!1,t.touchStart(e)}),this.container.addEventListener("touchmove",function(e){t.touchMove(e)}),this.container.addEventListener("touchend",function(e){t.touchEnd(e)})}},{key:"lock",value:function(){this.isLock=!0}},{key:"unLock",value:function(){this.isLock=!1,this.hasMoreData&&this.scrollListener(),this._options.useLocalScrollFix&&this.localScrollFix.update()}},{key:"noMoreData",value:function(){this.lock(),this.hasMoreData=!1,this.showNoMoreDataDom(),this._options.useLocalScrollFix&&!this.localScrollFix.isArrived&&this.localScrollFix.arrived(),this.detachScrollListener()}},{key:"refreshData",value:function(){this.showLoadingDom(),this.isLock=!1,this.hasMoreData=!0,this._options.useLocalScrollFix&&(this.localScrollFix=new u.a(this.win)),this.attachScrollListener()}},{key:"throwException",value:function(){this.showExceptionDom()}},{key:"solveException",value:function(){this.hasMoreData?(this.showLoadingDom(),this.unLock()):this.showNoMoreDataDom()}},{key:"setOptions",value:function(t){o.i(h.a)(this._options,t)}},{key:"getOptions",value:function(){return o.i(h.a)({},this._options)}}],[{key:"setGlobalOptions",value:function(e){o.i(h.a)(t.defaults,e)}}]),t}();v.defaults={enableLoadMore:!0,isInitLock:!1,threshold:10,window:window,useLocalScrollFix:!1,useScrollFix:!1,loadingHtml:"",noMoreDataHtml:"",exceptionHtml:"",loadMore:a,enablePullRefresh:!1,notEnoughRefreshPortHtml:"",overRefreshPortHtml:"",refreshingHtml:"",pullRefresh:a,arrivedRefreshPortHandler:a,touchStart:a,touchMove:a,touchEnd:a,overRefreshPortHandler:a,notEnoughRefreshPortHandler:a,calMovingDistance:function(t,e){return(e-t)/3},initedHandler:a},v.setStyles=r,e.default=v,v.setGlobalOptions(m.a),window.Scrollload=v}])});